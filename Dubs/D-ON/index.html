<html lang="ru">
<head>
<style>
video {
	border-radius: 12px; 
	border: 2px solid #bdbdbd;
}

.custom-select-wrapper {
    position: relative;
    width: 50px;
    margin-bottom: 15px;
}

.custom-select {
  background: #e2e2e2;
  color: black;
  padding: 7px 12px;
  border-radius: 8px;
  cursor: pointer;
  user-select: none;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.custom-select span {
	overflow: 1;
    display: block;
}

.custom-select ul {
    list-style: none;
    padding: 0;
    margin: 0;
    background: #d3d3d3;
    border-radius: 8px;
    position: absolute;
    width: 100%;
    top: 100%;
    left: 0;
    overflow: hidden;
	position: absolute;
    z-index: 999;
	margin-top: 3px;
}

/* Базовое состояние — скрыто */
#optionsList {
  opacity: 0;
  transform: translateY(-5px);
  pointer-events: none; /* чтобы нельзя было кликнуть */
  transition: opacity 0.3s ease, transform 0.3s ease;
  position: absolute;
  width: 100%;
  top: 100%;
  left: 0;
  list-style: none;
  padding: 0;
  margin-top: 3px;
  margin: 3px 0 0 0;
  background: #d3d3d3;
  border-radius: 8px;
  z-index: 999;
  max-height: 120px;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: #888 transparent;
}

/* Состояние — показано */
#optionsList.show {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* Для Webkit-браузеров (Chrome, Edge, Safari) */
#optionsList::-webkit-scrollbar {
    border-radius: 4px; 
  width: 8px;               /* ширина скроллбара */
}

#optionsList::-webkit-scrollbar-thumb {
  background-color: #888;   /* цвет ползунка */
  border-radius: 4px;       /* скругление ползунка */
}


#optionsList::-webkit-scrollbar-track {
  border-radius: 8px; /* скругление дорожки */
  background: transparent;
}



.custom-select ul li {
    padding: 10px;
    cursor: pointer;
}

.custom-select ul li:hover {
    background: #bdbdbd;
}


.arrow-wrapper {
  display: flex;
  align-items: center;
  gap: 5px; /* расстояние между | и стрелкой */
}

.separator {
  color: #555; /* серенький цвет для красоты */
  font-weight: bold;
}

.arrow {
  transition: transform 0.3s ease;
  font-size: 12px;
}

.arrow.open {
  transform: rotate(-90deg);
}


body.dark .custom-select {
    background: #212121;
    color: white;
}
body.dark .custom-select ul {
    background: #3a3a3a;
}
body.dark .custom-select ul li:hover {
    background: #555;
}
body.dark video {
	border-radius: 12px; 
	border: 2px solid #555;
}
body.dark #optionsList {
  background: #212121;
}

</style>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DebDub - D-ON</title>
<link rel="stylesheet" href="../../Assets/style.css">
<link rel="icon" type="image/png" href="https://www.dropbox.com/scl/fi/l9jdtpa354jl5u7azk62j/rounded-in-photoretrica.png?rlkey=bd0mgi47sq40u8fvdvsd682xo&st=jhaeoguo&raw=1">
</head>
<body>

<!-- Верхний топ-бар -->
<header class="top-bar">
    <button class="menu-btn" id="menuToggle">☰</button>
    <h1 class="page-title" id="pageTitle">D-ON</h1>
</header>

<!-- Боковое меню -->
<nav class="side-menu" id="sideMenu">
    <a href="../../Main/">Главная</a>
    <a href="../../Settings/">Настройки</a>
	<a href="../../Dubs/D-ON/">D-ON</a>
</nav>


<main>
	<div style="text-align: center; padding-bottom: 10px;">
		<img src="https://www.dropbox.com/scl/fi/mkfkg4sfkmc9qd1tbsgps/logo2.png?rlkey=p2gju3y44ci0stgkam2sc81rs&st=t07swefu&raw=1" alt="D-ON!" style="max-width: 100%; height: 150px;">
	</div>
	<div class="content-container">
        <div class="info-container">
		    <h1 style="text-align: center;">
		    	Вечер в хату, Деграданты
		    </h1>
        </div>
        <div class="info-container">
		    <div class="custom-select-wrapper">
		        <div class="custom-select" id="customSelect">  

		            <span id="selectedOption">Выбор эпизода</span>
                    <div class="arrow-wrapper">
                        <span class="separator">|</span>
                        <span class="arrow">◀</span>
                    </div>
		            <ul id="optionsList" class="hidden"></ul>
		        </div>
		    </div>

		    <video id="player" poster="https://media.tenor.com/jvM7s2tiUWsAAAAM/rat-spin.gif" width="100%" controls>
		        <source src="" type="video/mp4">
		        Ваш браузер не поддерживает видео.
		    </video>
        </div>
	</div>
</main>
<script>
// Массив с сериями
const episodes = [
    { title: "Эпизод 1", url: "https://www.dropbox.com/scl/fi/ruht8iy2etf02vfjwp1am/.mp4?rlkey=w7sbbxkjt0uh3kwlcmzk9j5fp&st=rx8wzh5z&raw=1" },
    { title: "Мем но.1", url: "https://www.dropbox.com/scl/fi/u5x4wcjgeh0fpc7ulkekq/.mp4?rlkey=koy1lhb5zmq15adi9ze7y8sij&st=w6ujd38o&raw=1" },
    { title: "Мем но.1", url: "https://www.dropbox.com/scl/fi/u5x4wcjgeh0fpc7ulkekq/.mp4?rlkey=koy1lhb5zmq15adi9ze7y8sij&st=w6ujd38o&raw=1" },
    { title: "Мем но.1", url: "https://www.dropbox.com/scl/fi/u5x4wcjgeh0fpc7ulkekq/.mp4?rlkey=koy1lhb5zmq15adi9ze7y8sij&st=w6ujd38o&raw=1" },
    { title: "Мем но.1", url: "https://www.dropbox.com/scl/fi/u5x4wcjgeh0fpc7ulkekq/.mp4?rlkey=koy1lhb5zmq15adi9ze7y8sij&st=w6ujd38o&raw=1" },
    { title: "Мем но.1", url: "https://www.dropbox.com/scl/fi/u5x4wcjgeh0fpc7ulkekq/.mp4?rlkey=koy1lhb5zmq15adi9ze7y8sij&st=w6ujd38o&raw=1" },
    { title: "Мем но.1", url: "https://www.dropbox.com/scl/fi/u5x4wcjgeh0fpc7ulkekq/.mp4?rlkey=koy1lhb5zmq15adi9ze7y8sij&st=w6ujd38o&raw=1" },
    { title: "Серия 3", url: "videos/episode3.mp4" }
];
let closeTimeout;
const player = document.getElementById("player");
const selectedOption = document.getElementById("selectedOption");
const optionsList = document.getElementById("optionsList");
const customSelect = document.getElementById("customSelect");
const arrow = document.querySelector(".arrow");

// Заполняем выпадающий список из массива
episodes.forEach((ep, index) => {
    const li = document.createElement("li");
    li.textContent = ep.title;
    li.addEventListener("click", () => {
        selectedOption.textContent = ep.title;
        player.querySelector("source").src = ep.url;
        player.load();
        optionsList.classList.remove("show");
        arrow.classList.remove("open");
    });
    optionsList.appendChild(li);
});



customSelect.addEventListener("click", (e) => {
    optionsList.classList.toggle("show");
    arrow.classList.toggle("open");
    e.stopPropagation(); 
});
// Клик на пункт — выбрать серию и закрыть меню
optionsList.addEventListener("click", (e) => {
    if (e.target.tagName === "LI") {
        const index = Array.from(optionsList.children).indexOf(e.target);
        selectedOption.textContent = episodes[index].title;
        player.querySelector("source").src = episodes[index].url;
        player.load();
        optionsList.classList.remove("show");
        arrow.classList.remove("open");
    }
});

// Клик вне селекта — закрыть меню
document.addEventListener("click", () => {
    optionsList.classList.remove("show");
    arrow.classList.remove("open");
});

// Закрытие меню при уходе курсора
customSelect.addEventListener("mouseleave", () => {
    closeTimeout = setTimeout(() => {
        optionsList.classList.remove("show");
        arrow.classList.remove("open");
    }, 300); // 300 мс задержка
});

// Отмена закрытия, если курсор вернулся
customSelect.addEventListener("mouseenter", () => {
    clearTimeout(closeTimeout);
});
</script>
<script src="../../Assets/script.js"></script>
</body>
</html>